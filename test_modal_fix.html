<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Modal Fix</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .test-section { 
            background: #f5f5f5; 
            padding: 20px; 
            margin: 20px 0; 
            border-radius: 8px; 
        }
        .result { 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 4px; 
        }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .info { background-color: #d1ecf1; color: #0c5460; }
        .console-log { 
            background: #333; 
            color: #0f0; 
            padding: 15px; 
            border-radius: 4px; 
            font-family: monospace; 
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        button { 
            background: #007bff; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 4px; 
            cursor: pointer; 
            margin: 5px; 
        }
        button:hover { background: #0056b3; }
        .button-group { margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Modal Field Verification Test</h1>
        
        <div class="test-section">
            <h2>Test Overview</h2>
            <p>This test verifies that the Edit modal and Create modal now show the same fields, especially dropdown fields.</p>
        </div>

        <div class="button-group">
            <button onclick="openMainApp()">Open Main App</button>
            <button onclick="compareModals()">Compare Edit & Create Modal Fields</button>
            <button onclick="clearConsole()">Clear Console</button>
        </div>

        <div class="test-section">
            <h3>Expected Result</h3>
            <p>Both Edit and Create modals should show the same set of fields, including all dropdown fields (A, C, R, U, D, solutions, etc.)</p>
        </div>

        <div class="console-log" id="consoleOutput">Console output will appear here...</div>
        
        <div id="test-results"></div>
    </div>

    <script>
        const consoleOutput = document.getElementById('consoleOutput');
        const testResults = document.getElementById('test-results');
        
        function log(message) {
            consoleOutput.textContent += message + '\n';
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        function logResult(type, message) {
            const result = document.createElement('div');
            result.className = `result ${type}`;
            result.textContent = message;
            testResults.appendChild(result);
        }
        
        function openMainApp() {
            window.open('http://localhost:3000', '_blank');
            logResult('info', '🚀 Main app opened! Now test both Edit and Create modals.');
        }
        
        function compareModals() {
            log('🔍 Running modal comparison script...');
            log('Copy and paste this script in your browser console when modals are open:');
            log(`
// Function to analyze modal fields
function compareModalFields() {
    console.log('===== Modal Field Comparison =====');
    
    const editModal = document.getElementById('editRowModal');
    const createModal = document.getElementById('createOpportunityModal');
    
    console.log('\\n1. EDIT MODAL FIELDS:');
    if (editModal && !editModal.classList.contains('hidden')) {
        const fields = editModal.querySelectorAll('input, select, textarea');
        
        if (fields.length === 0) {
            console.log('No form elements found in Edit Modal');
        } else {
            const fieldNames = Array.from(fields).map(f => f.name || f.id);
            console.log(\`Found \${fields.length} fields: \${fieldNames.join(', ')}\`);
            
            // Count dropdown fields
            const dropdowns = editModal.querySelectorAll('select');
            console.log(\`Dropdowns (\${dropdowns.length}):\`);
            dropdowns.forEach(select => {
                const name = select.name || select.id;
                const options = Array.from(select.options).map(opt => opt.value);
                console.log(\`  \${name}: \${options.join(', ')}\`);
            });
        }
    } else {
        console.log('Edit Modal not open or not found');
    }
    
    console.log('\\n2. CREATE MODAL FIELDS:');
    if (createModal && !createModal.classList.contains('hidden')) {
        const fields = createModal.querySelectorAll('input, select, textarea');
        
        if (fields.length === 0) {
            console.log('No form elements found in Create Modal');
        } else {
            const fieldNames = Array.from(fields).map(f => f.name || f.id);
            console.log(\`Found \${fields.length} fields: \${fieldNames.join(', ')}\`);
            
            // Count dropdown fields
            const dropdowns = createModal.querySelectorAll('select');
            console.log(\`Dropdowns (\${dropdowns.length}):\`);
            dropdowns.forEach(select => {
                const name = select.name || select.id;
                const options = Array.from(select.options).map(opt => opt.value);
                console.log(\`  \${name}: \${options.join(', ')}\`);
            });
        }
    } else {
        console.log('Create Modal not open or not found');
    }
}

// Run the comparison
compareModalFields();
            `);
        }

        function clearConsole() {
            consoleOutput.textContent = 'Console cleared...\n';
            document.getElementById('test-results').innerHTML = '';
        }

        // Initialize
        log('🚀 Modal Field Verification Test initialized');
        log('📋 Instructions:');
        log('1. Click "Open Main App" to open the main application');
        log('2. In the main app, click "Create New" to open the Create modal');
        log('3. Note the fields, especially dropdown fields');
        log('4. Close the Create modal and click "Edit" on any opportunity to see the Edit modal');
        log('5. Compare the fields in both modals - they should match');
        log('6. Use the "Compare Edit & Create Modal Fields" button to get a script to run in your browser console for detailed comparison');
    </script>
</body>
</html>
