encoded_date: date [2025-01-01]
project_name : text 
project_code : text 
rev: integer 
client : text
solutions : text 
sol_particulars : text 
industries : text 
ind_particulars : text 
date_received : date [2025-01-01]
client_deadline: date [2025-01-01], [remove ‘TBI’]
decision: text 
account_mgr : text 
pic : text 
bom : text 
status : text
submitted_date : date [2025-01-01]
margin: numeric [remove percentage]
final_amt: numeric [remove comma]
opp_status: text 
date_awarded_lost : date [2025-01-01]
lost_rca: text
l_particulars : text
a : text
c: text
r: text
u: text
d: text remarks_comments : text
uid : uuid [add this column in the csv]
forecast_date : date [2025-01-01] [add this column in the csv]

// --- User Authentication & Roles ---

CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    name TEXT,
    is_verified BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE roles (
    id SERIAL PRIMARY KEY,
    name TEXT UNIQUE NOT NULL -- e.g., 'technical', 'proposal', 'sales'
);

CREATE TABLE user_roles (
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    role_id INTEGER REFERENCES roles(id) ON DELETE CASCADE,
    PRIMARY KEY (user_id, role_id)
);

-- User-specific column visibility preferences
CREATE TABLE user_column_preferences (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    page_name TEXT NOT NULL, -- e.g., 'opportunities', 'forecast', 'win-loss'
    column_settings JSONB NOT NULL, -- stores column visibility as {"column_name": true/false}
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(user_id, page_name)
);